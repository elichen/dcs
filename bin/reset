#!/usr/bin/env python3
"""
reset - Reset environment to initial state

Usage:
    reset <session-id>

Reset the environment to initial state with new random object/target positions.
This allows running multiple tests without restarting the session.
"""

import sys
import os

# Add parent directory to Python path
sys.path.insert(0, os.path.join(os.path.dirname(os.path.abspath(__file__)), '..'))

from lib.fetch_api import FetchAPI

def main():
    if len(sys.argv) != 2:
        print("Usage: reset <session-id>", file=sys.stderr)
        return 1
    
    session_id = sys.argv[1]
    
    try:
        api = FetchAPI.connect(session_id)
        success, message = api.reset_environment()
        
        if success:
            print(f"✅ Environment reset: {message}")
            return 0
        else:
            print(f"❌ Reset failed: {message}", file=sys.stderr)
            return 1
            
    except Exception as e:
        print(f"❌ Reset error: {e}", file=sys.stderr)
        return 1

if __name__ == '__main__':
    sys.exit(main())